const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Scene-CL3jQdJh.js","assets/three-Bs3MLzTg.js","assets/react-BwVFrCCm.js","assets/mediapipe-SP_W-jUr.js"])))=>i.map(i=>d[i]);
import{j as t,u as re,_ as ae,c as se}from"./three-Bs3MLzTg.js";import{b as ne,a as x}from"./react-BwVFrCCm.js";import{r as oe,a as ie}from"./mediapipe-SP_W-jUr.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function e(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(l){if(l.ep)return;l.ep=!0;const n=e(l);fetch(l.href,n)}})();const g=6,y=7,z=0,F=1,M=2,U={easy:{depth:2,randomness:.4},medium:{depth:4,randomness:.1},hard:{depth:6,randomness:0}},le=(r,s="medium")=>{const e=U[s]||U.medium,a=$(r);if(Math.random()<e.randomness)return a[Math.floor(Math.random()*a.length)];for(let o of a){const i=R(r,o),c=r.map(f=>[...f]);if(c[i][o]=M,_(c,M))return o}for(let o of a){const i=R(r,o),c=r.map(f=>[...f]);if(c[i][o]=F,_(c,F))return o}let l=-1/0,n=a[Math.floor(Math.random()*a.length)];for(let o of a){const i=R(r,o),c=r.map(d=>[...d]);c[i][o]=M;const f=G(c,e.depth,-1/0,1/0,!1);f>l&&(l=f,n=o)}return n},G=(r,s,e,a,l)=>{const n=$(r),o=ce(r);if(s===0||o)return o?_(r,M)?1e6:_(r,F)?-1e6:0:de(r,M);if(l){let i=-1/0;for(let c of n){const f=R(r,c),d=r.map(S=>[...S]);d[f][c]=M;const b=G(d,s-1,e,a,!1);if(i=Math.max(i,b),e=Math.max(e,i),e>=a)break}return i}else{let i=1/0;for(let c of n){const f=R(r,c),d=r.map(S=>[...S]);d[f][c]=F;const b=G(d,s-1,e,a,!0);if(i=Math.min(i,b),a=Math.min(a,i),e>=a)break}return i}},$=r=>{const s=[];for(let e=0;e<y;e++)r[g-1][e]===z&&s.push(e);return s},R=(r,s)=>{for(let e=0;e<g;e++)if(r[e][s]===z)return e;return-1},ce=r=>_(r,F)||_(r,M)||$(r).length===0,de=(r,s)=>{let e=0;const l=r.map(n=>n[3]).filter(n=>n===s).length;e+=l*3;for(let n=0;n<g;n++){const o=r[n];for(let i=0;i<y-3;i++){const c=o.slice(i,i+4);e+=H(c,s)}}for(let n=0;n<y;n++){const o=r.map(i=>i[n]);for(let i=0;i<g-3;i++){const c=o.slice(i,i+4);e+=H(c,s)}}for(let n=0;n<g-3;n++)for(let o=0;o<y-3;o++){const i=[r[n][o],r[n+1][o+1],r[n+2][o+2],r[n+3][o+3]];e+=H(i,s)}for(let n=0;n<g-3;n++)for(let o=0;o<y-3;o++){const i=[r[n+3][o],r[n+2][o+1],r[n+1][o+2],r[n][o+3]];e+=H(i,s)}return e},H=(r,s)=>{let e=0;const a=F,l=r.filter(i=>i===s).length,n=r.filter(i=>i===z).length,o=r.filter(i=>i===a).length;return l===4?e+=100:l===3&&n===1?e+=5:l===2&&n===2&&(e+=2),o===3&&n===1&&(e-=4),e},_=(r,s)=>{for(let e=0;e<y-3;e++)for(let a=0;a<g;a++)if(r[a][e]===s&&r[a][e+1]===s&&r[a][e+2]===s&&r[a][e+3]===s)return!0;for(let e=0;e<y;e++)for(let a=0;a<g-3;a++)if(r[a][e]===s&&r[a+1][e]===s&&r[a+2][e]===s&&r[a+3][e]===s)return!0;for(let e=0;e<y-3;e++)for(let a=0;a<g-3;a++)if(r[a][e]===s&&r[a+1][e+1]===s&&r[a+2][e+2]===s&&r[a+3][e+3]===s)return!0;for(let e=0;e<y-3;e++)for(let a=3;a<g;a++)if(r[a][e]===s&&r[a-1][e+1]===s&&r[a-2][e+2]===s&&r[a-3][e+3]===s)return!0;return!1},V=(r,s)=>{for(let e=0;e<y-3;e++)for(let a=0;a<g;a++)if(r[a][e]===s&&r[a][e+1]===s&&r[a][e+2]===s&&r[a][e+3]===s)return[[a,e],[a,e+1],[a,e+2],[a,e+3]];for(let e=0;e<y;e++)for(let a=0;a<g-3;a++)if(r[a][e]===s&&r[a+1][e]===s&&r[a+2][e]===s&&r[a+3][e]===s)return[[a,e],[a+1,e],[a+2,e],[a+3,e]];for(let e=0;e<y-3;e++)for(let a=0;a<g-3;a++)if(r[a][e]===s&&r[a+1][e+1]===s&&r[a+2][e+2]===s&&r[a+3][e+3]===s)return[[a,e],[a+1,e+1],[a+2,e+2],[a+3,e+3]];for(let e=0;e<y-3;e++)for(let a=3;a<g;a++)if(r[a][e]===s&&r[a-1][e+1]===s&&r[a-2][e+2]===s&&r[a-3][e+3]===s)return[[a,e],[a-1,e+1],[a-2,e+2],[a-3,e+3]];return null},O=6,Y=7,E=ne((r,s)=>({board:Array.from({length:O},()=>Array(Y).fill(0)),currentPlayer:1,winner:null,gameStatus:"menu",difficulty:"medium",inputMode:"mouse",hoverColumn:3,winningLine:null,isAiming:!1,setHoverColumn:e=>r({hoverColumn:e}),setDifficulty:e=>r({difficulty:e}),setInputMode:e=>r({inputMode:e}),setIsAiming:e=>r({isAiming:e}),startGame:()=>r({board:Array.from({length:O},()=>Array(Y).fill(0)),currentPlayer:1,winner:null,gameStatus:"playing",winningLine:null,isAiming:!1}),toMenu:()=>r({gameStatus:"menu"}),playMove:e=>{const{board:a,currentPlayer:l,winner:n,gameStatus:o,difficulty:i}=s();if(n||o!=="playing"||l!==1)return;let c=-1;for(let d=0;d<O;d++)if(a[d][e]===0){c=d;break}if(c===-1)return;const f=a.map(d=>[...d]);if(f[c][e]=1,_(f,1)){const d=V(f,1);r({board:f,winner:1,winningLine:d}),setTimeout(()=>{r({gameStatus:"gameover"})},1500);return}r({board:f,currentPlayer:2}),setTimeout(()=>{const{board:d,winner:b}=s();if(b)return;const S=le(d,i);let I=-1;for(let h=0;h<O;h++)if(d[h][S]===0){I=h;break}if(I!==-1){const h=d.map(C=>[...C]);if(h[I][S]=2,_(h,2)){const C=V(h,2);r({board:h,winner:2,currentPlayer:1,winningLine:C}),setTimeout(()=>{r({gameStatus:"gameover"})},1500)}else h.every(C=>C.every(L=>L!==0))?(r({board:h,currentPlayer:1,winner:"draw"}),setTimeout(()=>{r({gameStatus:"gameover"})},1500)):r({board:h,currentPlayer:1})}},1200)}})),fe={section1Title:"1. The Recursive Algorithm",section1Text:"This game uses the Minimax algorithm with a depth-limited search. It treats Connect 4 as a Zero-Sum Game (Your gain is my loss). The AI builds a 'Game Tree' by recursively simulating moves. At 'Hard' difficulty, it calculates 6 moves ahead (Depth 6), exploring thousands of possible future board states before you even blink.",section2Title:"2. Heuristic Evaluation Function",section2Text:"Since we cannot calculate until the end of the game (too many possibilities), we stop at a certain depth and score the board state using a Heuristic Function:",section2List:["Center Column Control: +3 points (Strategic value).","3-in-a-row (Open): +5 points (Attack).","2-in-a-row (Open): +2 points (Build up).","Opponent has 3-in-a-row: -4 points (Defensive penalty)."],section3Title:"3. Optimization: Alpha-Beta Pruning",section3Text:"To make the AI faster, we implement Alpha-Beta Pruning. This optimization 'prunes' (cuts off) branches of the decision tree that are mathematically irrelevant. If the AI finds a move that is 'good enough', it stops checking worse options immediately. This allows us to search twice as deep in the same amount of time."},ue={section1Title:"Û±. Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ø§Ø²Ú¯Ø´ØªÛŒ (Recursive)",section1Text:"Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ Ø§Ø² Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù…ÛŒÙ†ÛŒâ€ŒÙ…Ú©Ø³ (Minimax) Ø¨Ø§ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­Ø¯ÙˆØ¯ Ø¯Ø± Ø¹Ù…Ù‚ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Connect 4 Ø±Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÛŒÚ© Â«Ø¨Ø§Ø²ÛŒ Ù…Ø¬Ù…ÙˆØ¹-ØµÙØ±Â» (Zero-Sum Game) Ø¯Ø± Ù†Ø¸Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯. Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¨Ø§ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§Ø²Ú¯Ø´ØªÛŒ Ø­Ø±Ú©Ø§ØªØŒ ÛŒÚ© Â«Ø¯Ø±Ø®Øª Ø¨Ø§Ø²ÛŒÂ» Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯. Ø¯Ø± Ø³Ø·Ø­ Ø¯Ø´ÙˆØ§Ø±ØŒ ØªØ§ Û¶ Ø­Ø±Ú©Øª Ø¬Ù„ÙˆØªØ± Ø±Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ (Ø¹Ù…Ù‚ Û¶) Ùˆ Ù‡Ø²Ø§Ø±Ø§Ù† Ø­Ø§Ù„Øª Ù…Ù…Ú©Ù† Ø¢ÛŒÙ†Ø¯Ù‡ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.",section2Title:"Û². ØªØ§Ø¨Ø¹ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù‡ÛŒÙˆØ±ÛŒØ³ØªÛŒÚ© (Heuristic)",section2Text:"Ú†ÙˆÙ† Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… ØªØ§ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ø­Ø§Ù„Ø§Øª Ø±Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ù†ÛŒÙ… (ØªØ¹Ø¯Ø§Ø¯ Ø­Ø§Ù„Ø§Øª Ø¨Ø³ÛŒØ§Ø± Ø²ÛŒØ§Ø¯ Ø§Ø³Øª)ØŒ Ø¯Ø± Ø¹Ù…Ù‚ Ù…Ø´Ø®ØµÛŒ ØªÙˆÙ‚Ù Ú©Ø±Ø¯Ù‡ Ùˆ ØµÙØ­Ù‡ Ø±Ø§ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÛŒÚ© ØªØ§Ø¨Ø¹ Ù‡ÛŒÙˆØ±ÛŒØ³ØªÛŒÚ© Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:",section2List:["Ú©Ù†ØªØ±Ù„ Ø³ØªÙˆÙ† Ù…Ø±Ú©Ø²ÛŒ: +Û³ Ø§Ù…ØªÛŒØ§Ø² (Ø§Ø±Ø²Ø´ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ©).","Û³ Ù…Ù‡Ø±Ù‡ Ù¾Ø´Øª Ø³Ø± Ù‡Ù… (Ø¨Ø§Ø²): +Ûµ Ø§Ù…ØªÛŒØ§Ø² (Ø­Ù…Ù„Ù‡).","Û² Ù…Ù‡Ø±Ù‡ Ù¾Ø´Øª Ø³Ø± Ù‡Ù… (Ø¨Ø§Ø²): +Û² Ø§Ù…ØªÛŒØ§Ø² (Ø²Ù…ÛŒÙ†Ù‡ Ø³Ø§Ø²ÛŒ).","Ø­Ø±ÛŒÙ Û³ Ù…Ù‡Ø±Ù‡ Ø¯Ø§Ø±Ø¯: -Û´ Ø§Ù…ØªÛŒØ§Ø² (Ø¬Ø±ÛŒÙ…Ù‡ Ø¯ÙØ§Ø¹ÛŒ)."],section3Title:"Û³. Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ: Ù‡Ø±Ø³ Ø¢Ù„ÙØ§-Ø¨ØªØ§ (Alpha-Beta Pruning)",section3Text:"Ø¨Ø±Ø§ÛŒ Ø§ÙØ²Ø§ÛŒØ´ Ø³Ø±Ø¹Øª Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒØŒ Ø§Ø² Â«Ù‡Ø±Ø³ Ø¢Ù„ÙØ§-Ø¨ØªØ§Â» Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…. Ø§ÛŒÙ† Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§ÛŒÛŒ Ø§Ø² Ø¯Ø±Ø®Øª ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ø±Ø§ Ú©Ù‡ Ø§Ø² Ù†Ø¸Ø± Ø±ÛŒØ§Ø¶ÛŒ Ø¨ÛŒâ€ŒØ§Ù‡Ù…ÛŒØª Ù‡Ø³ØªÙ†Ø¯ØŒ Â«Ù‡Ø±Ø³Â» (Ù‚Ø·Ø¹) Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§Ú¯Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø­Ø±Ú©ØªÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯ Ú©Ù‡ Â«Ø¨Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ú©Ø§ÙÛŒ Ø®ÙˆØ¨Â» Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø¯ØªØ± Ø±Ø§ Ù…ØªÙˆÙ‚Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§ÛŒÙ† Ø¨Ù‡ Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ø¯Ø± Ù‡Ù…Ø§Ù† Ù…Ø¯Øª Ø²Ù…Ø§Ù†ØŒ ØªØ§ Ø¯Ùˆ Ø¨Ø±Ø§Ø¨Ø± Ø¹Ù…ÛŒÙ‚â€ŒØªØ± Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†ÛŒÙ…."},A={en:fe,fa:ue},me=()=>{const{startGame:r,difficulty:s,setDifficulty:e,inputMode:a,setInputMode:l,gameStatus:n}=E(),[o,i]=x.useState(!1),[c,f]=x.useState("en");return n!=="menu"?null:t.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-[#050a15]/90 backdrop-blur-sm text-white font-serif",children:[t.jsxs("div",{className:"text-center mb-8 relative group",children:[t.jsx("h1",{className:"text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-b from-[#ffd700] via-[#ffaa00] to-[#b8860b] drop-shadow-[0_0_15px_rgba(255,215,0,0.6)] animate-pulse cursor-default",children:"MYSTIC CONNECT"}),t.jsx("p",{className:"text-[#aaccff] mt-2 tracking-[0.3em] uppercase text-sm opacity-80 border-t border-b border-[#aaccff]/30 py-1 inline-block",children:"The Ancient Ritual"})]}),t.jsxs("div",{className:"glass-panel p-10 w-[450px] space-y-8 relative border border-[#ffd700]/30 shadow-[0_0_40px_rgba(0,0,0,0.5)]",children:[t.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-[#ffd700] rounded-tl-lg"}),t.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-[#ffd700] rounded-tr-lg"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-[#ffd700] rounded-bl-lg"}),t.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-[#ffd700] rounded-br-lg"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"text-xs font-bold text-[#ffd700] uppercase tracking-widest text-center block",children:"Choose Your Vessel"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("button",{onClick:()=>l("mouse"),className:`flex-1 py-4 px-2 rounded-lg transition-all border border-[#4a5a7a] flex flex-col items-center gap-2 group
                ${a==="mouse"?"bg-[#1a3a6a] border-[#ffd700] shadow-[0_0_15px_rgba(255,215,0,0.2)]":"bg-[#0d1d3d] opacity-60 hover:opacity-100 hover:border-[#aaccff]"}`,children:[t.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:"ðŸ–±ï¸"}),t.jsx("span",{className:"text-[10px] uppercase font-bold text-[#aaccff]",children:"Tactician"})]}),t.jsxs("button",{onClick:()=>l("hand"),className:`flex-1 py-4 px-2 rounded-lg transition-all border border-[#4a5a7a] flex flex-col items-center gap-2 group
                ${a==="hand"?"bg-[#3a1a6a] border-[#ff00ff] shadow-[0_0_15px_rgba(255,0,255,0.3)]":"bg-[#1d0d3d] opacity-60 hover:opacity-100 hover:border-[#ebaaff]"}`,children:[t.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:"ðŸ”¥"}),t.jsx("span",{className:"text-[10px] uppercase font-bold text-[#ebaaff]",children:"Fire Caster"})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"text-xs font-bold text-[#ffd700] uppercase tracking-widest text-center block",children:"Spirit Strength"}),t.jsx("div",{className:"flex justify-between gap-2 p-1 rounded bg-[#050a15]/50 border border-[#2a3a5a]",children:["easy","medium","hard"].map(d=>t.jsxs("button",{onClick:()=>e(d),className:`flex-1 py-2 text-xs font-bold rounded transition-all capitalize ${s===d?"bg-[#2a4a7a] text-[#ffd700] shadow-md border border-[#4a6a9a]":"text-[#5a6a8a] hover:text-[#aaccff]"}`,children:[d==="easy"&&"Novice",d==="medium"&&"Adept",d==="hard"&&"Master"]},d))}),t.jsxs("div",{className:"text-[10px] text-[#5a6a8a] text-center italic font-sans min-h-[1.5em]",children:[s==="easy"&&"The spirit is playful and makes mistakes.",s==="medium"&&"A worthy opponent for a trained mage.",s==="hard"&&"The Ancient One sees all futures."]})]}),t.jsx("button",{onClick:r,className:"magic-btn w-full py-4 text-xl font-bold tracking-widest rounded shadow-lg border-2 border-[#ffd700]",children:"Begin Ritual"}),t.jsxs("button",{onClick:()=>i(!0),className:"w-full py-2 bg-transparent border border-[#aaccff]/30 text-[#aaccff]/60 hover:text-[#ffd700] hover:border-[#ffd700] rounded transition flex items-center justify-center gap-2 uppercase tracking-widest text-[10px] group",children:[t.jsx("span",{children:"ðŸ“œ The Scroll of Logic"}),t.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:"âœ¨"})]})]}),t.jsx("div",{className:"absolute bottom-6 flex flex-col items-center gap-2 z-50",children:t.jsxs("a",{href:"https://github.com/Amkhodaei83",target:"_blank",rel:"noopener noreferrer",className:"text-[#aaccff] opacity-60 hover:opacity-100 hover:text-[#ffd700] transition-all text-xs tracking-widest uppercase flex items-center gap-2 group",children:[t.jsx("span",{children:"Forged by Amkhodaei83"}),t.jsx("span",{className:"text-lg group-hover:-translate-y-1 transition-transform",children:"ðŸ”—"})]})}),o&&t.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-black/95 backdrop-blur-xl p-4 animate-bounce-in",children:t.jsxs("div",{className:"bg-[#0d1d3d] border border-[#ffd700] w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-lg shadow-[0_0_50px_rgba(255,215,0,0.1)] relative flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-[#aaccff]/20 bg-[#050a15]",children:[t.jsx("h2",{className:"text-xl font-bold text-[#ffd700] tracking-widest uppercase",children:c==="en"?"Under the Hood: Minimax":"Ø²ÛŒØ± Ú©Ø§Ù¾ÙˆØª: Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù…ÛŒÙ†ÛŒâ€ŒÙ…Ú©Ø³"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>f("en"),className:`px-3 py-1 rounded text-xs font-bold transition-colors ${c==="en"?"bg-[#ffd700] text-black":"bg-[#1a3a6a] text-gray-400"}`,children:"EN"}),t.jsx("button",{onClick:()=>f("fa"),className:`px-3 py-1 rounded text-xs font-bold transition-colors ${c==="fa"?"bg-[#ffd700] text-black":"bg-[#1a3a6a] text-gray-400"}`,children:"FA"})]})]}),t.jsxs("div",{className:"p-8 text-[#e0e0e0] space-y-8 leading-relaxed text-sm md:text-base font-sans",dir:c==="fa"?"rtl":"ltr",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-[#00ffff] font-bold text-lg mb-2 border-b border-[#00ffff]/30 pb-1 inline-block",children:A[c].section1Title}),t.jsx("p",{className:"opacity-90",children:A[c].section1Text})]}),t.jsxs("div",{className:"bg-[#050a15]/50 p-6 rounded border border-[#aaccff]/10",children:[t.jsx("h3",{className:"text-[#ffd700] font-bold text-lg mb-2 border-b border-[#ffd700]/30 pb-1 inline-block",children:A[c].section2Title}),t.jsx("ul",{className:"list-disc list-inside space-y-2 opacity-90 mt-2",children:A[c].section2List.map((d,b)=>t.jsx("li",{children:d},b))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-[#ff00ff] font-bold text-lg mb-2 border-b border-[#ff00ff]/30 pb-1 inline-block",children:A[c].section3Title}),t.jsx("p",{className:"opacity-90",children:A[c].section3Text})]})]}),t.jsx("div",{className:"p-4 border-t border-[#aaccff]/20 bg-[#050a15] text-center sticky bottom-0",children:t.jsx("button",{onClick:()=>i(!1),className:"px-8 py-2 bg-[#aaccff]/10 hover:bg-[#aaccff]/20 text-[#aaccff] border border-[#aaccff]/50 rounded transition uppercase tracking-widest text-xs",children:c==="en"?"Close Terminal":"Ø¨Ø³ØªÙ† ØªØ±Ù…ÛŒÙ†Ø§Ù„"})})]})}),t.jsx("div",{className:"mt-8 text-[#aaccff] text-xs max-w-md text-center bg-[#050a15]/60 p-4 rounded border border-[#aaccff]/20",children:a==="hand"?t.jsxs(t.Fragment,{children:["Hold ",t.jsx("span",{className:"font-bold text-white",children:"Fist âœŠ"})," to charge energy. ",t.jsx("span",{className:"font-bold text-white",children:"Open Hand ðŸ–"})," to release spell."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"font-bold text-white",children:"Move cursor"})," to aim. ",t.jsx("span",{className:"font-bold text-white",children:"Click"})," to summon orb."]})})]})},xe=()=>{const{gameStatus:r,currentPlayer:s,winner:e,startGame:a,toMenu:l}=E();if(r==="menu")return null;let n=s;return e===1&&(n=1),e===2&&(n=2),t.jsxs("div",{className:"absolute inset-0 pointer-events-none z-20 flex flex-col justify-between p-8 font-serif",children:[t.jsxs("div",{className:"flex justify-between items-start w-full pointer-events-auto",children:[t.jsx("button",{onClick:l,className:"bg-[#050a15]/80 backdrop-blur border border-[#4a5a7a] text-[#aaccff] px-4 py-2 rounded hover:bg-[#1a2a4a] hover:border-[#ffd700] transition-all text-sm uppercase tracking-widest shadow-lg",children:"â† Retreat"}),t.jsx("div",{className:`
           relative px-8 py-3 rounded-full border-2 shadow-[0_0_20px_rgba(0,0,0,0.5)] backdrop-blur-md transform transition-all duration-500
           ${n===1?"bg-gradient-to-r from-[#5a3a1a] to-[#8a5a2a] border-[#ffd700] shadow-[0_0_20px_rgba(255,170,0,0.4)]":"bg-gradient-to-r from-[#1a2a4a] to-[#2a4a7a] border-[#aaccff] shadow-[0_0_20px_rgba(0,170,255,0.4)]"}
        `,children:t.jsx("h2",{className:"text-xl font-bold flex items-center gap-4 text-white drop-shadow-md",children:n===1?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-2xl animate-pulse",children:"â˜€ï¸"}),t.jsx("span",{className:"tracking-widest text-[#ffd700]",children:"YOUR TURN"})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"tracking-widest text-[#aaccff]",children:"SPIRIT TURN"}),t.jsx("span",{className:"text-2xl animate-pulse",children:"ðŸŒ™"})]})})})]}),r==="gameover"&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#050a15]/80 pointer-events-auto backdrop-blur-sm z-50 animate-bounce-in",children:t.jsxs("div",{className:"bg-[#0a1a2a] border-4 border-[#ffd700] p-12 rounded-lg shadow-[0_0_50px_rgba(255,215,0,0.3)] text-center max-w-lg w-full relative overflow-hidden",children:[t.jsx("div",{className:`absolute inset-0 opacity-20 ${e===1?"bg-[#ffd700]":"bg-[#0000ff]"}`}),t.jsxs("h2",{className:"text-6xl font-black mb-4 uppercase tracking-widest relative z-10 drop-shadow-[0_4px_4px_rgba(0,0,0,1)]",children:[e===1&&t.jsx("span",{className:"text-[#ffd700] text-glow",children:"Victory!"}),e===2&&t.jsx("span",{className:"text-[#5555ff] text-glow",children:"Defeated"}),e==="draw"&&t.jsx("span",{className:"text-[#aaaaaa]",children:"Stalemate"})]}),t.jsx("p",{className:"text-[#aaccff] mb-10 text-lg relative z-10 italic border-t border-b border-[#aaccff]/20 py-4",children:e===1?"The Rune Gate has opened.":"The Spirit has blocked your path."}),t.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[t.jsx("button",{onClick:a,className:"magic-btn w-full py-4 text-xl font-bold rounded shadow-lg",children:"Replay Ritual ðŸ”„"}),t.jsx("button",{onClick:l,className:"w-full py-3 bg-transparent border border-[#4a5a7a] text-[#5a6a8a] hover:text-white hover:border-white rounded transition uppercase tracking-widest text-sm",children:"Return to Void"})]})]})})]})};var q=oe(),X=ie();const he=()=>{const r=x.useRef(null),s=x.useRef(null),e="/connect4-3d-hand/",a=x.useRef(!1),l=x.useRef(!1),{inputMode:n,setHoverColumn:o,playMove:i,setIsAiming:c}=E(),[f,d]=x.useState([]),[b,S]=x.useState(""),[I,h]=x.useState(null),[C,L]=x.useState(!1),[N,D]=x.useState("loading"),w=x.useRef({wasFist:!1,fistHoldFrames:0,openHoldFrames:0,lastCol:3});x.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const Z=async()=>{try{const m=(await navigator.mediaDevices.enumerateDevices()).filter(j=>j.kind==="videoinput");l.current&&(d(m),m.length>0&&!b&&S(m[0].deviceId))}catch(u){console.error("Error enumerating devices:",u)}};x.useEffect(()=>{if(n!=="hand")return;let u=null,m=null,j=null;return(async()=>{L(!1),h(null);try{const v={video:b?{deviceId:{exact:b},width:{ideal:640},height:{ideal:480}}:{width:{ideal:640},height:{ideal:480}}},T=await navigator.mediaDevices.getUserMedia(v);u=T,await Z(),r.current&&(r.current.srcObject=T,await new Promise(k=>{r.current.onloadeddata=()=>{r.current.play().catch(B=>console.log("Play interrupted")),k()}}),l.current&&L(!0)),m=new q.Hands({locateFile:k=>`${e}mediapipe/${k}`}),m.setOptions({maxNumHands:1,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),m.onResults(J);const P=async()=>{if(!l.current)return;const k=r.current;if(k&&k.readyState>=2&&!a.current)try{a.current=!0,await m.send({image:k})}catch{}finally{a.current=!1}l.current&&(j=requestAnimationFrame(P))};P()}catch(v){console.error("Camera System Error:",v),l.current&&h("Camera access denied or missing.")}})(),()=>{u&&u.getTracks().forEach(v=>v.stop()),m&&m.close(),j&&cancelAnimationFrame(j),a.current=!1}},[n,b]);const K=u=>{const m=u[0],j=[8,12,16,20];let p=0;return j.forEach(v=>{const T=u[v];Math.hypot(T.x-m.x,T.y-m.y)>.25&&p++}),p>=3?"open":"fist"},J=u=>{if(!l.current||!s.current||!u.image||!r.current)return;const m=r.current.videoWidth,j=r.current.videoHeight;if(m===0||j===0)return;s.current.width=m,s.current.height=j;const p=s.current.getContext("2d");if(p.save(),p.clearRect(0,0,m,j),p.translate(m,0),p.scale(-1,1),p.drawImage(u.image,0,0,m,j),u.multiHandLandmarks&&u.multiHandLandmarks.length>0){const v=u.multiHandLandmarks[0],T=K(v);if(E.getState().gameStatus==="playing")if(T==="fist"){if(w.current.fistHoldFrames++,w.current.openHoldFrames=0,w.current.fistHoldFrames>3){w.current.wasFist=!0,D("aiming"),c(!0);const B=v[0],Q=v[5],ee=1-(B.x+Q.x)/2,te=Math.floor((Math.max(.2,Math.min(ee,.8))-.2)/.6*7),W=Math.max(0,Math.min(6,te));w.current.lastCol=W,o(W)}}else T==="open"&&(w.current.fistHoldFrames=0,w.current.openHoldFrames++,c(!1),w.current.wasFist?w.current.openHoldFrames>5&&(D("dropping"),i(w.current.lastCol),w.current.wasFist=!1):D("reloading"));const k=N==="aiming"?"#FFD700":N==="dropping"?"#00FFFF":"#aaaaaa";p.shadowColor=k,p.shadowBlur=15,X.drawConnectors(p,v,q.HAND_CONNECTIONS,{color:k,lineWidth:5}),X.drawLandmarks(p,v,{color:"#ffffff",lineWidth:2,radius:4}),p.shadowBlur=0}else c(!1),w.current.fistHoldFrames=0;p.restore()};return n!=="hand"?null:t.jsxs("div",{className:"absolute bottom-6 right-6 z-50 flex flex-col items-end gap-2 font-serif",children:[t.jsx("label",{htmlFor:"camera-select",className:"sr-only",children:"Choose Camera"}),t.jsxs("select",{id:"camera-select",className:"bg-[#050a15]/90 text-[#aaccff] text-[10px] p-1 rounded border border-[#4a5a7a] outline-none max-w-[150px] uppercase tracking-wider cursor-pointer",onChange:u=>S(u.target.value),value:b,children:[f.length===0&&t.jsx("option",{children:"Finding Camera..."}),f.map((u,m)=>t.jsx("option",{value:u.deviceId,children:u.label||`Scrying Glass ${m+1}`},u.deviceId))]}),t.jsx("div",{className:`
          relative w-52 h-40 overflow-hidden rounded-lg transition-all duration-300
          border-4 shadow-[0_0_20px_rgba(0,0,0,0.5)] bg-black
          ${N==="aiming"?"border-[#ffd700] shadow-[0_0_30px_rgba(255,215,0,0.6)]":N==="dropping"?"border-[#00ffff] shadow-[0_0_35px_rgba(0,255,255,0.8)] scale-105":"border-[#4a5a7a] opacity-90"}
      `,children:I?t.jsx("div",{className:"flex items-center justify-center h-full p-4 text-red-500 text-xs text-center",children:I}):t.jsxs(t.Fragment,{children:[t.jsx("video",{ref:r,className:"hidden",playsInline:!0,muted:!0,autoPlay:!0}),t.jsx("canvas",{ref:s,className:"w-full h-full object-cover"}),!C&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[#aaccff] text-xs animate-pulse tracking-widest bg-black/80 z-10",children:"WARMING UP VISION..."}),C&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:t.jsxs("span",{className:`
                        px-3 py-1 text-[10px] font-bold tracking-[0.2em] uppercase backdrop-blur-md border shadow-lg transition-all duration-200
                        ${N==="aiming"?"bg-[#ffd700]/20 border-[#ffd700] text-[#ffd700]":N==="dropping"?"bg-[#00ffff]/20 border-[#00ffff] text-[#00ffff] scale-125":"bg-black/40 border-white/20 text-gray-400"}
                    `,children:[N==="aiming"&&"âš¡ CHARGING",N==="dropping"&&"âœ¨ CAST!",N==="reloading"&&"âœŠ FIST TO AIM",N==="loading"&&"..."]})})]})})]})},pe=()=>{const{progress:r,active:s}=re();return!s&&r===100?null:t.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-[#0a1a2a] transition-opacity duration-1000",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-[#ffd700] font-serif text-2xl tracking-[0.3em] animate-pulse mb-6 drop-shadow-[0_0_10px_rgba(255,215,0,0.5)]",children:"SUMMONING WORLD"}),t.jsx("div",{className:"w-64 h-2 bg-[#1a2a4a] rounded-full mx-auto overflow-hidden border border-[#4a5a7a] relative",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-[#b8860b] to-[#ffd700] shadow-[0_0_20px_#ffd700]",style:{width:`${r}%`,transition:"width 0.2s ease-out"}})}),t.jsxs("div",{className:"mt-3 text-[#aaccff] text-xs font-mono opacity-70",children:[r.toFixed(0),"% COMPLETE"]})]})})},ge=x.lazy(()=>ae(()=>import("./Scene-CL3jQdJh.js"),__vite__mapDeps([0,1,2,3])));function be(){return t.jsxs("div",{className:"relative w-full h-screen bg-[#0a1a2a] overflow-hidden font-serif",children:[t.jsx(pe,{}),t.jsx("div",{className:"absolute inset-0 z-0",children:t.jsx(x.Suspense,{fallback:null,children:t.jsx(ge,{})})}),t.jsx(me,{}),t.jsx(xe,{}),t.jsx(he,{})]})}se.createRoot(document.getElementById("root")).render(t.jsx(x.StrictMode,{children:t.jsx(be,{})}));export{E as u};
