const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Scene-Dft6_gKz.js","assets/three-Bs3MLzTg.js","assets/react-BwVFrCCm.js","assets/mediapipe-SP_W-jUr.js"])))=>i.map(i=>d[i]);
import{j as t,u as se,_ as ae,c as ne}from"./three-Bs3MLzTg.js";import{b as oe,a as x}from"./react-BwVFrCCm.js";import{r as ie,a as le}from"./mediapipe-SP_W-jUr.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(l){if(l.ep)return;l.ep=!0;const n=e(l);fetch(l.href,n)}})();const g=6,b=7,B=0,M=1,T=2,U={easy:{depth:2,randomness:.4},medium:{depth:4,randomness:.1},hard:{depth:6,randomness:0}},ce=(r,a="medium")=>{const e=U[a]||U.medium,s=z(r);if(Math.random()<e.randomness)return s[Math.floor(Math.random()*s.length)];for(let o of s){const i=I(r,o),c=r.map(m=>[...m]);if(c[i][o]=T,C(c,T))return o}for(let o of s){const i=I(r,o),c=r.map(m=>[...m]);if(c[i][o]=M,C(c,M))return o}let l=-1/0,n=s[Math.floor(Math.random()*s.length)];for(let o of s){const i=I(r,o),c=r.map(d=>[...d]);c[i][o]=T;const m=D(c,e.depth,-1/0,1/0,!1);m>l&&(l=m,n=o)}return n},D=(r,a,e,s,l)=>{const n=z(r),o=de(r);if(a===0||o)return o?C(r,T)?1e6:C(r,M)?-1e6:0:fe(r,T);if(l){let i=-1/0;for(let c of n){const m=I(r,c),d=r.map(j=>[...j]);d[m][c]=T;const w=D(d,a-1,e,s,!1);if(i=Math.max(i,w),e=Math.max(e,i),e>=s)break}return i}else{let i=1/0;for(let c of n){const m=I(r,c),d=r.map(j=>[...j]);d[m][c]=M;const w=D(d,a-1,e,s,!0);if(i=Math.min(i,w),s=Math.min(s,i),e>=s)break}return i}},z=r=>{const a=[];for(let e=0;e<b;e++)r[g-1][e]===B&&a.push(e);return a},I=(r,a)=>{for(let e=0;e<g;e++)if(r[e][a]===B)return e;return-1},de=r=>C(r,M)||C(r,T)||z(r).length===0,fe=(r,a)=>{let e=0;const l=r.map(n=>n[3]).filter(n=>n===a).length;e+=l*3;for(let n=0;n<g;n++){const o=r[n];for(let i=0;i<b-3;i++){const c=o.slice(i,i+4);e+=P(c,a)}}for(let n=0;n<b;n++){const o=r.map(i=>i[n]);for(let i=0;i<g-3;i++){const c=o.slice(i,i+4);e+=P(c,a)}}for(let n=0;n<g-3;n++)for(let o=0;o<b-3;o++){const i=[r[n][o],r[n+1][o+1],r[n+2][o+2],r[n+3][o+3]];e+=P(i,a)}for(let n=0;n<g-3;n++)for(let o=0;o<b-3;o++){const i=[r[n+3][o],r[n+2][o+1],r[n+1][o+2],r[n][o+3]];e+=P(i,a)}return e},P=(r,a)=>{let e=0;const s=M,l=r.filter(i=>i===a).length,n=r.filter(i=>i===B).length,o=r.filter(i=>i===s).length;return l===4?e+=100:l===3&&n===1?e+=5:l===2&&n===2&&(e+=2),o===3&&n===1&&(e-=4),e},C=(r,a)=>{for(let e=0;e<b-3;e++)for(let s=0;s<g;s++)if(r[s][e]===a&&r[s][e+1]===a&&r[s][e+2]===a&&r[s][e+3]===a)return!0;for(let e=0;e<b;e++)for(let s=0;s<g-3;s++)if(r[s][e]===a&&r[s+1][e]===a&&r[s+2][e]===a&&r[s+3][e]===a)return!0;for(let e=0;e<b-3;e++)for(let s=0;s<g-3;s++)if(r[s][e]===a&&r[s+1][e+1]===a&&r[s+2][e+2]===a&&r[s+3][e+3]===a)return!0;for(let e=0;e<b-3;e++)for(let s=3;s<g;s++)if(r[s][e]===a&&r[s-1][e+1]===a&&r[s-2][e+2]===a&&r[s-3][e+3]===a)return!0;return!1},V=(r,a)=>{for(let e=0;e<b-3;e++)for(let s=0;s<g;s++)if(r[s][e]===a&&r[s][e+1]===a&&r[s][e+2]===a&&r[s][e+3]===a)return[[s,e],[s,e+1],[s,e+2],[s,e+3]];for(let e=0;e<b;e++)for(let s=0;s<g-3;s++)if(r[s][e]===a&&r[s+1][e]===a&&r[s+2][e]===a&&r[s+3][e]===a)return[[s,e],[s+1,e],[s+2,e],[s+3,e]];for(let e=0;e<b-3;e++)for(let s=0;s<g-3;s++)if(r[s][e]===a&&r[s+1][e+1]===a&&r[s+2][e+2]===a&&r[s+3][e+3]===a)return[[s,e],[s+1,e+1],[s+2,e+2],[s+3,e+3]];for(let e=0;e<b-3;e++)for(let s=3;s<g;s++)if(r[s][e]===a&&r[s-1][e+1]===a&&r[s-2][e+2]===a&&r[s-3][e+3]===a)return[[s,e],[s-1,e+1],[s-2,e+2],[s-3,e+3]];return null},O=6,Y=7,E=oe((r,a)=>({board:Array.from({length:O},()=>Array(Y).fill(0)),currentPlayer:1,winner:null,gameStatus:"menu",difficulty:"medium",inputMode:"mouse",hoverColumn:3,winningLine:null,isAiming:!1,setHoverColumn:e=>r({hoverColumn:e}),setDifficulty:e=>r({difficulty:e}),setInputMode:e=>r({inputMode:e}),setIsAiming:e=>r({isAiming:e}),startGame:()=>r({board:Array.from({length:O},()=>Array(Y).fill(0)),currentPlayer:1,winner:null,gameStatus:"playing",winningLine:null,isAiming:!1}),toMenu:()=>r({gameStatus:"menu"}),playMove:e=>{const{board:s,currentPlayer:l,winner:n,gameStatus:o,difficulty:i}=a();if(n||o!=="playing"||l!==1)return;let c=-1;for(let d=0;d<O;d++)if(s[d][e]===0){c=d;break}if(c===-1)return;const m=s.map(d=>[...d]);if(m[c][e]=1,C(m,1)){const d=V(m,1);r({board:m,winner:1,winningLine:d}),setTimeout(()=>{r({gameStatus:"gameover"})},1500);return}r({board:m,currentPlayer:2}),setTimeout(()=>{const{board:d,winner:w}=a();if(w)return;const j=ce(d,i);let A=-1;for(let h=0;h<O;h++)if(d[h][j]===0){A=h;break}if(A!==-1){const h=d.map(N=>[...N]);if(h[A][j]=2,C(h,2)){const N=V(h,2);r({board:h,winner:2,currentPlayer:1,winningLine:N}),setTimeout(()=>{r({gameStatus:"gameover"})},1500)}else h.every(N=>N.every(F=>F!==0))?(r({board:h,currentPlayer:1,winner:"draw"}),setTimeout(()=>{r({gameStatus:"gameover"})},1500)):r({board:h,currentPlayer:1})}},1200)}})),ue={section1Title:"1. The Recursive Algorithm",section1Text:"This game uses the Minimax algorithm with a depth-limited search. It treats Connect 4 as a Zero-Sum Game (Your gain is my loss). The AI builds a 'Game Tree' by recursively simulating moves. At 'Hard' difficulty, it calculates 6 moves ahead (Depth 6), exploring thousands of possible future board states before you even blink.",section2Title:"2. Heuristic Evaluation Function",section2Text:"Since we cannot calculate until the end of the game (too many possibilities), we stop at a certain depth and score the board state using a Heuristic Function:",section2List:["Center Column Control: +3 points (Strategic value).","3-in-a-row (Open): +5 points (Attack).","2-in-a-row (Open): +2 points (Build up).","Opponent has 3-in-a-row: -4 points (Defensive penalty)."],section3Title:"3. Optimization: Alpha-Beta Pruning",section3Text:"To make the AI faster, we implement Alpha-Beta Pruning. This optimization 'prunes' (cuts off) branches of the decision tree that are mathematically irrelevant. If the AI finds a move that is 'good enough', it stops checking worse options immediately. This allows us to search twice as deep in the same amount of time."},me={section1Title:"Û±. Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ø§Ø²Ú¯Ø´ØªÛŒ (Recursive)",section1Text:"Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ Ø§Ø² Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù…ÛŒÙ†ÛŒâ€ŒÙ…Ú©Ø³ (Minimax) Ø¨Ø§ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­Ø¯ÙˆØ¯ Ø¯Ø± Ø¹Ù…Ù‚ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Connect 4 Ø±Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÛŒÚ© Â«Ø¨Ø§Ø²ÛŒ Ù…Ø¬Ù…ÙˆØ¹-ØµÙØ±Â» (Zero-Sum Game) Ø¯Ø± Ù†Ø¸Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯. Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¨Ø§ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§Ø²Ú¯Ø´ØªÛŒ Ø­Ø±Ú©Ø§ØªØŒ ÛŒÚ© Â«Ø¯Ø±Ø®Øª Ø¨Ø§Ø²ÛŒÂ» Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯. Ø¯Ø± Ø³Ø·Ø­ Ø¯Ø´ÙˆØ§Ø±ØŒ ØªØ§ Û¶ Ø­Ø±Ú©Øª Ø¬Ù„ÙˆØªØ± Ø±Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ (Ø¹Ù…Ù‚ Û¶) Ùˆ Ù‡Ø²Ø§Ø±Ø§Ù† Ø­Ø§Ù„Øª Ù…Ù…Ú©Ù† Ø¢ÛŒÙ†Ø¯Ù‡ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.",section2Title:"Û². ØªØ§Ø¨Ø¹ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù‡ÛŒÙˆØ±ÛŒØ³ØªÛŒÚ© (Heuristic)",section2Text:"Ú†ÙˆÙ† Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… ØªØ§ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ø­Ø§Ù„Ø§Øª Ø±Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ù†ÛŒÙ… (ØªØ¹Ø¯Ø§Ø¯ Ø­Ø§Ù„Ø§Øª Ø¨Ø³ÛŒØ§Ø± Ø²ÛŒØ§Ø¯ Ø§Ø³Øª)ØŒ Ø¯Ø± Ø¹Ù…Ù‚ Ù…Ø´Ø®ØµÛŒ ØªÙˆÙ‚Ù Ú©Ø±Ø¯Ù‡ Ùˆ ØµÙØ­Ù‡ Ø±Ø§ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÛŒÚ© ØªØ§Ø¨Ø¹ Ù‡ÛŒÙˆØ±ÛŒØ³ØªÛŒÚ© Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:",section2List:["Ú©Ù†ØªØ±Ù„ Ø³ØªÙˆÙ† Ù…Ø±Ú©Ø²ÛŒ: +Û³ Ø§Ù…ØªÛŒØ§Ø² (Ø§Ø±Ø²Ø´ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ©).","Û³ Ù…Ù‡Ø±Ù‡ Ù¾Ø´Øª Ø³Ø± Ù‡Ù… (Ø¨Ø§Ø²): +Ûµ Ø§Ù…ØªÛŒØ§Ø² (Ø­Ù…Ù„Ù‡).","Û² Ù…Ù‡Ø±Ù‡ Ù¾Ø´Øª Ø³Ø± Ù‡Ù… (Ø¨Ø§Ø²): +Û² Ø§Ù…ØªÛŒØ§Ø² (Ø²Ù…ÛŒÙ†Ù‡ Ø³Ø§Ø²ÛŒ).","Ø­Ø±ÛŒÙ Û³ Ù…Ù‡Ø±Ù‡ Ø¯Ø§Ø±Ø¯: -Û´ Ø§Ù…ØªÛŒØ§Ø² (Ø¬Ø±ÛŒÙ…Ù‡ Ø¯ÙØ§Ø¹ÛŒ)."],section3Title:"Û³. Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ: Ù‡Ø±Ø³ Ø¢Ù„ÙØ§-Ø¨ØªØ§ (Alpha-Beta Pruning)",section3Text:"Ø¨Ø±Ø§ÛŒ Ø§ÙØ²Ø§ÛŒØ´ Ø³Ø±Ø¹Øª Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒØŒ Ø§Ø² Â«Ù‡Ø±Ø³ Ø¢Ù„ÙØ§-Ø¨ØªØ§Â» Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…. Ø§ÛŒÙ† Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§ÛŒÛŒ Ø§Ø² Ø¯Ø±Ø®Øª ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ø±Ø§ Ú©Ù‡ Ø§Ø² Ù†Ø¸Ø± Ø±ÛŒØ§Ø¶ÛŒ Ø¨ÛŒâ€ŒØ§Ù‡Ù…ÛŒØª Ù‡Ø³ØªÙ†Ø¯ØŒ Â«Ù‡Ø±Ø³Â» (Ù‚Ø·Ø¹) Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§Ú¯Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø­Ø±Ú©ØªÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯ Ú©Ù‡ Â«Ø¨Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ú©Ø§ÙÛŒ Ø®ÙˆØ¨Â» Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø¯ØªØ± Ø±Ø§ Ù…ØªÙˆÙ‚Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§ÛŒÙ† Ø¨Ù‡ Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ø¯Ø± Ù‡Ù…Ø§Ù† Ù…Ø¯Øª Ø²Ù…Ø§Ù†ØŒ ØªØ§ Ø¯Ùˆ Ø¨Ø±Ø§Ø¨Ø± Ø¹Ù…ÛŒÙ‚â€ŒØªØ± Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†ÛŒÙ…."},_={en:ue,fa:me},xe=()=>{const{startGame:r,difficulty:a,setDifficulty:e,inputMode:s,setInputMode:l,gameStatus:n}=E(),[o,i]=x.useState(!1),[c,m]=x.useState("en");return n!=="menu"?null:t.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-[#050a15]/90 backdrop-blur-sm text-white font-serif",children:[t.jsxs("div",{className:"text-center mb-8 relative group",children:[t.jsx("h1",{className:"text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-b from-[#ffd700] via-[#ffaa00] to-[#b8860b] drop-shadow-[0_0_15px_rgba(255,215,0,0.6)] animate-pulse cursor-default",children:"MYSTIC CONNECT"}),t.jsx("p",{className:"text-[#aaccff] mt-2 tracking-[0.3em] uppercase text-sm opacity-80 border-t border-b border-[#aaccff]/30 py-1 inline-block",children:"The Ancient Ritual"})]}),t.jsxs("div",{className:"glass-panel p-10 w-[450px] space-y-8 relative border border-[#ffd700]/30 shadow-[0_0_40px_rgba(0,0,0,0.5)]",children:[t.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-[#ffd700] rounded-tl-lg"}),t.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-[#ffd700] rounded-tr-lg"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-[#ffd700] rounded-bl-lg"}),t.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-[#ffd700] rounded-br-lg"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"text-xs font-bold text-[#ffd700] uppercase tracking-widest text-center block",children:"Choose Your Vessel"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("button",{onClick:()=>l("mouse"),className:`flex-1 py-4 px-2 rounded-lg transition-all border border-[#4a5a7a] flex flex-col items-center gap-2 group
                ${s==="mouse"?"bg-[#1a3a6a] border-[#ffd700] shadow-[0_0_15px_rgba(255,215,0,0.2)]":"bg-[#0d1d3d] opacity-60 hover:opacity-100 hover:border-[#aaccff]"}`,children:[t.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:"ðŸ–±ï¸"}),t.jsx("span",{className:"text-[10px] uppercase font-bold text-[#aaccff]",children:"Tactician"})]}),t.jsxs("button",{onClick:()=>l("hand"),className:`flex-1 py-4 px-2 rounded-lg transition-all border border-[#4a5a7a] flex flex-col items-center gap-2 group
                ${s==="hand"?"bg-[#3a1a6a] border-[#ff00ff] shadow-[0_0_15px_rgba(255,0,255,0.3)]":"bg-[#1d0d3d] opacity-60 hover:opacity-100 hover:border-[#ebaaff]"}`,children:[t.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:"ðŸ”¥"}),t.jsx("span",{className:"text-[10px] uppercase font-bold text-[#ebaaff]",children:"Fire Caster"})]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"text-xs font-bold text-[#ffd700] uppercase tracking-widest text-center block",children:"Spirit Strength"}),t.jsx("div",{className:"flex justify-between gap-2 p-1 rounded bg-[#050a15]/50 border border-[#2a3a5a]",children:["easy","medium","hard"].map(d=>t.jsxs("button",{onClick:()=>e(d),className:`flex-1 py-2 text-xs font-bold rounded transition-all capitalize ${a===d?"bg-[#2a4a7a] text-[#ffd700] shadow-md border border-[#4a6a9a]":"text-[#5a6a8a] hover:text-[#aaccff]"}`,children:[d==="easy"&&"Novice",d==="medium"&&"Adept",d==="hard"&&"Master"]},d))}),t.jsxs("div",{className:"text-[10px] text-[#5a6a8a] text-center italic font-sans min-h-[1.5em]",children:[a==="easy"&&"The spirit is playful and makes mistakes.",a==="medium"&&"A worthy opponent for a trained mage.",a==="hard"&&"The Ancient One sees all futures."]})]}),t.jsx("button",{onClick:r,className:"magic-btn w-full py-4 text-xl font-bold tracking-widest rounded shadow-lg border-2 border-[#ffd700]",children:"Begin Ritual"}),t.jsxs("button",{onClick:()=>i(!0),className:"w-full py-2 bg-transparent border border-[#aaccff]/30 text-[#aaccff]/60 hover:text-[#ffd700] hover:border-[#ffd700] rounded transition flex items-center justify-center gap-2 uppercase tracking-widest text-[10px] group",children:[t.jsx("span",{children:"ðŸ“œ The Scroll of Logic"}),t.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:"âœ¨"})]})]}),t.jsx("div",{className:"absolute bottom-6 flex flex-col items-center gap-2 z-50",children:t.jsxs("a",{href:"https://github.com/Amkhodaei83",target:"_blank",rel:"noopener noreferrer",className:"text-[#aaccff] opacity-60 hover:opacity-100 hover:text-[#ffd700] transition-all text-xs tracking-widest uppercase flex items-center gap-2 group",children:[t.jsx("span",{children:"Forged by Amkhodaei83"}),t.jsx("span",{className:"text-lg group-hover:-translate-y-1 transition-transform",children:"ðŸ”—"})]})}),o&&t.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-black/95 backdrop-blur-xl p-4 animate-bounce-in",children:t.jsxs("div",{className:"bg-[#0d1d3d] border border-[#ffd700] w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-lg shadow-[0_0_50px_rgba(255,215,0,0.1)] relative flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-[#aaccff]/20 bg-[#050a15]",children:[t.jsx("h2",{className:"text-xl font-bold text-[#ffd700] tracking-widest uppercase",children:c==="en"?"Under the Hood: Minimax":"Ø²ÛŒØ± Ú©Ø§Ù¾ÙˆØª: Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù…ÛŒÙ†ÛŒâ€ŒÙ…Ú©Ø³"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>m("en"),className:`px-3 py-1 rounded text-xs font-bold transition-colors ${c==="en"?"bg-[#ffd700] text-black":"bg-[#1a3a6a] text-gray-400"}`,children:"EN"}),t.jsx("button",{onClick:()=>m("fa"),className:`px-3 py-1 rounded text-xs font-bold transition-colors ${c==="fa"?"bg-[#ffd700] text-black":"bg-[#1a3a6a] text-gray-400"}`,children:"FA"})]})]}),t.jsxs("div",{className:"p-8 text-[#e0e0e0] space-y-8 leading-relaxed text-sm md:text-base font-sans",dir:c==="fa"?"rtl":"ltr",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-[#00ffff] font-bold text-lg mb-2 border-b border-[#00ffff]/30 pb-1 inline-block",children:_[c].section1Title}),t.jsx("p",{className:"opacity-90",children:_[c].section1Text})]}),t.jsxs("div",{className:"bg-[#050a15]/50 p-6 rounded border border-[#aaccff]/10",children:[t.jsx("h3",{className:"text-[#ffd700] font-bold text-lg mb-2 border-b border-[#ffd700]/30 pb-1 inline-block",children:_[c].section2Title}),t.jsx("ul",{className:"list-disc list-inside space-y-2 opacity-90 mt-2",children:_[c].section2List.map((d,w)=>t.jsx("li",{children:d},w))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-[#ff00ff] font-bold text-lg mb-2 border-b border-[#ff00ff]/30 pb-1 inline-block",children:_[c].section3Title}),t.jsx("p",{className:"opacity-90",children:_[c].section3Text})]})]}),t.jsx("div",{className:"p-4 border-t border-[#aaccff]/20 bg-[#050a15] text-center sticky bottom-0",children:t.jsx("button",{onClick:()=>i(!1),className:"px-8 py-2 bg-[#aaccff]/10 hover:bg-[#aaccff]/20 text-[#aaccff] border border-[#aaccff]/50 rounded transition uppercase tracking-widest text-xs",children:c==="en"?"Close Terminal":"Ø¨Ø³ØªÙ† ØªØ±Ù…ÛŒÙ†Ø§Ù„"})})]})}),t.jsx("div",{className:"mt-8 text-[#aaccff] text-xs max-w-md text-center bg-[#050a15]/60 p-4 rounded border border-[#aaccff]/20",children:s==="hand"?t.jsxs(t.Fragment,{children:["Hold ",t.jsx("span",{className:"font-bold text-white",children:"Fist âœŠ"})," to charge energy. ",t.jsx("span",{className:"font-bold text-white",children:"Open Hand ðŸ–"})," to release spell."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"font-bold text-white",children:"Move cursor"})," to aim. ",t.jsx("span",{className:"font-bold text-white",children:"Click"})," to summon orb."]})})]})},he=()=>{const{gameStatus:r,currentPlayer:a,winner:e,startGame:s,toMenu:l}=E();if(r==="menu")return null;let n=a;return e===1&&(n=1),e===2&&(n=2),t.jsxs("div",{className:"absolute inset-0 pointer-events-none z-20 flex flex-col justify-between p-8 font-serif",children:[t.jsxs("div",{className:"flex justify-between items-start w-full pointer-events-auto",children:[t.jsx("button",{onClick:l,className:"bg-[#050a15]/80 backdrop-blur border border-[#4a5a7a] text-[#aaccff] px-4 py-2 rounded hover:bg-[#1a2a4a] hover:border-[#ffd700] transition-all text-sm uppercase tracking-widest shadow-lg",children:"â† Retreat"}),t.jsx("div",{className:`
           relative px-8 py-3 rounded-full border-2 shadow-[0_0_20px_rgba(0,0,0,0.5)] backdrop-blur-md transform transition-all duration-500
           ${n===1?"bg-gradient-to-r from-[#5a3a1a] to-[#8a5a2a] border-[#ffd700] shadow-[0_0_20px_rgba(255,170,0,0.4)]":"bg-gradient-to-r from-[#1a2a4a] to-[#2a4a7a] border-[#aaccff] shadow-[0_0_20px_rgba(0,170,255,0.4)]"}
        `,children:t.jsx("h2",{className:"text-xl font-bold flex items-center gap-4 text-white drop-shadow-md",children:n===1?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-2xl animate-pulse",children:"â˜€ï¸"}),t.jsx("span",{className:"tracking-widest text-[#ffd700]",children:"YOUR TURN"})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"tracking-widest text-[#aaccff]",children:"SPIRIT TURN"}),t.jsx("span",{className:"text-2xl animate-pulse",children:"ðŸŒ™"})]})})})]}),r==="gameover"&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#050a15]/80 pointer-events-auto backdrop-blur-sm z-50 animate-bounce-in",children:t.jsxs("div",{className:"bg-[#0a1a2a] border-4 border-[#ffd700] p-12 rounded-lg shadow-[0_0_50px_rgba(255,215,0,0.3)] text-center max-w-lg w-full relative overflow-hidden",children:[t.jsx("div",{className:`absolute inset-0 opacity-20 ${e===1?"bg-[#ffd700]":"bg-[#0000ff]"}`}),t.jsxs("h2",{className:"text-6xl font-black mb-4 uppercase tracking-widest relative z-10 drop-shadow-[0_4px_4px_rgba(0,0,0,1)]",children:[e===1&&t.jsx("span",{className:"text-[#ffd700] text-glow",children:"Victory!"}),e===2&&t.jsx("span",{className:"text-[#5555ff] text-glow",children:"Defeated"}),e==="draw"&&t.jsx("span",{className:"text-[#aaaaaa]",children:"Stalemate"})]}),t.jsx("p",{className:"text-[#aaccff] mb-10 text-lg relative z-10 italic border-t border-b border-[#aaccff]/20 py-4",children:e===1?"The Rune Gate has opened.":"The Spirit has blocked your path."}),t.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[t.jsx("button",{onClick:s,className:"magic-btn w-full py-4 text-xl font-bold rounded shadow-lg",children:"Replay Ritual ðŸ”„"}),t.jsx("button",{onClick:l,className:"w-full py-3 bg-transparent border border-[#4a5a7a] text-[#5a6a8a] hover:text-white hover:border-white rounded transition uppercase tracking-widest text-sm",children:"Return to Void"})]})]})})]})};var q=ie(),Z=le();const pe=()=>{const r=x.useRef(null),a=x.useRef(null),e=x.useRef(null),s=x.useRef(null),l="/connect4-3d-hand/",n=x.useRef(!1),o=x.useRef(!1),{inputMode:i,setHoverColumn:c,playMove:m,setIsAiming:d}=E(),[w,j]=x.useState([]),[A,h]=x.useState(""),[N,F]=x.useState(null),[K,G]=x.useState(!1),v=x.useRef({wasFist:!1,fistHoldFrames:0,openHoldFrames:0,lastCol:3});x.useEffect(()=>(n.current=!0,()=>{H(),n.current=!1}),[]);const H=()=>{e.current&&(e.current.getTracks().forEach(f=>f.stop()),e.current=null),s.current&&(s.current.close(),s.current=null),G(!1)},L=async(f=null)=>{if(n.current){H(),F(null);try{let u={video:!0};f&&(u={video:{deviceId:{exact:f},width:640,height:480}}),console.log("ðŸ“· Starting Camera...",u);const p=await navigator.mediaDevices.getUserMedia(u);if(!n.current){p.getTracks().forEach(k=>k.stop());return}e.current=p,r.current&&(r.current.srcObject=p,await new Promise(k=>{r.current.onloadeddata=()=>{r.current.play().catch(R=>console.warn(R)),k()}}));const y=(await navigator.mediaDevices.enumerateDevices()).filter(k=>k.kind==="videoinput");if(j(y),f)h(f);else if(y.length>0){const R=p.getVideoTracks()[0].getSettings();R.deviceId&&h(R.deviceId)}J(p)}catch(u){console.error("âŒ Camera Failed:",u),f?(console.warn("âš ï¸ Specific camera failed, trying default..."),L(null)):F("Camera Blocked. Close other apps & reload.")}}},J=f=>{const u=new q.Hands({locateFile:p=>`${l}mediapipe/${p}`});u.setOptions({maxNumHands:1,modelComplexity:0,minDetectionConfidence:.5,minTrackingConfidence:.5}),u.onResults(X),s.current=u,G(!0),requestAnimationFrame($)},$=async()=>{if(!(!n.current||!s.current||!r.current)){if(r.current.readyState>=2&&!o.current){o.current=!0;try{await s.current.send({image:r.current})}catch{}o.current=!1}requestAnimationFrame($)}};x.useEffect(()=>{i==="hand"?L(null):H()},[i]);const Q=f=>{const u=f[0],p=[8,12,16,20];let S=0;return p.forEach(y=>{Math.hypot(f[y].x-u.x,f[y].y-u.y)>.25&&S++}),S>=3?"open":"fist"},X=f=>{if(!a.current||!r.current)return;const u=a.current.getContext("2d"),{videoWidth:p,videoHeight:S}=r.current;if(a.current.width=p,a.current.height=S,u.save(),u.clearRect(0,0,p,S),u.translate(p,0),u.scale(-1,1),u.drawImage(f.image,0,0,p,S),f.multiHandLandmarks?.length>0){const y=f.multiHandLandmarks[0],k=Q(y);if(E.getState().gameStatus==="playing")if(k==="fist"){if(v.current.fistHoldFrames++,v.current.openHoldFrames=0,v.current.fistHoldFrames>3){v.current.wasFist=!0,d(!0);const te=1-(y[0].x+y[5].x)/2,re=Math.floor((Math.max(.2,Math.min(te,.8))-.2)/.6*7),W=Math.max(0,Math.min(6,re));v.current.lastCol=W,c(W)}}else v.current.fistHoldFrames=0,v.current.openHoldFrames++,d(!1),v.current.wasFist&&v.current.openHoldFrames>5&&(m(v.current.lastCol),v.current.wasFist=!1);const ee=v.current.wasFist?"#FFD700":"#aaaaaa";Z.drawConnectors(u,y,q.HAND_CONNECTIONS,{color:ee,lineWidth:5}),Z.drawLandmarks(u,y,{color:"#ffffff",lineWidth:2,radius:4})}u.restore()};return i!=="hand"?null:t.jsxs("div",{className:"absolute bottom-6 right-6 z-50 flex flex-col items-end gap-2 font-serif",children:[t.jsxs("select",{className:"bg-[#050a15]/90 text-[#aaccff] text-[10px] p-1 rounded border border-[#4a5a7a] outline-none max-w-[150px] uppercase tracking-wider cursor-pointer",onChange:f=>L(f.target.value),value:A,children:[w.length===0&&t.jsx("option",{children:"Detecting..."}),w.map((f,u)=>t.jsx("option",{value:f.deviceId,children:f.label||`Camera ${u+1}`},f.deviceId))]}),t.jsx("div",{className:"relative w-52 h-40 overflow-hidden rounded-lg border-4 border-[#4a5a7a] bg-black",children:N?t.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-4 text-red-500 text-xs text-center font-bold bg-black/90",children:[t.jsx("span",{children:N}),t.jsx("button",{onClick:()=>L(null),className:"mt-2 bg-gray-800 px-2 py-1 rounded",children:"Retry"})]}):t.jsxs(t.Fragment,{children:[t.jsx("video",{ref:r,className:"hidden",playsInline:!0,muted:!0,autoPlay:!0}),t.jsx("canvas",{ref:a,className:"w-full h-full object-cover"}),!K&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[#aaccff] text-xs animate-pulse bg-black/80",children:"STARTING VISION..."})]})})]})},ge=()=>{const{progress:r,active:a}=se();return!a&&r===100?null:t.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-[#0a1a2a] transition-opacity duration-1000",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-[#ffd700] font-serif text-2xl tracking-[0.3em] animate-pulse mb-6 drop-shadow-[0_0_10px_rgba(255,215,0,0.5)]",children:"SUMMONING WORLD"}),t.jsx("div",{className:"w-64 h-2 bg-[#1a2a4a] rounded-full mx-auto overflow-hidden border border-[#4a5a7a] relative",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-[#b8860b] to-[#ffd700] shadow-[0_0_20px_#ffd700]",style:{width:`${r}%`,transition:"width 0.2s ease-out"}})}),t.jsxs("div",{className:"mt-3 text-[#aaccff] text-xs font-mono opacity-70",children:[r.toFixed(0),"% COMPLETE"]})]})})},be=x.lazy(()=>ae(()=>import("./Scene-Dft6_gKz.js"),__vite__mapDeps([0,1,2,3])));function ve(){return t.jsxs("div",{className:"relative w-full h-screen bg-[#0a1a2a] overflow-hidden font-serif",children:[t.jsx(ge,{}),t.jsx("div",{className:"absolute inset-0 z-0",children:t.jsx(x.Suspense,{fallback:null,children:t.jsx(be,{})})}),t.jsx(xe,{}),t.jsx(he,{}),t.jsx(pe,{})]})}ne.createRoot(document.getElementById("root")).render(t.jsx(x.StrictMode,{children:t.jsx(ve,{})}));export{E as u};
