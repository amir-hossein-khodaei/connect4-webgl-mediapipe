const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Scene-DNPc-Deh.js","assets/three-Bs3MLzTg.js","assets/react-BwVFrCCm.js","assets/mediapipe-SP_W-jUr.js"])))=>i.map(i=>d[i]);
import{j as r,u as ee,_ as te,c as re}from"./three-Bs3MLzTg.js";import{b as ae,a as x}from"./react-BwVFrCCm.js";import{r as se,a as ne}from"./mediapipe-SP_W-jUr.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function e(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(l){if(l.ep)return;l.ep=!0;const n=e(l);fetch(l.href,n)}})();const v=6,y=7,E=0,A=1,_=2,z={easy:{depth:2,randomness:.4},medium:{depth:4,randomness:.1},hard:{depth:6,randomness:0}},oe=(t,s="medium")=>{const e=z[s]||z.medium,a=D(t);if(Math.random()<e.randomness)return a[Math.floor(Math.random()*a.length)];for(let i of a){const o=F(t,i),c=t.map(m=>[...m]);if(c[o][i]=_,T(c,_))return i}for(let i of a){const o=F(t,i),c=t.map(m=>[...m]);if(c[o][i]=A,T(c,A))return i}let l=-1/0,n=a[Math.floor(Math.random()*a.length)];for(let i of a){const o=F(t,i),c=t.map(d=>[...d]);c[o][i]=_;const m=P(c,e.depth,-1/0,1/0,!1);m>l&&(l=m,n=i)}return n},P=(t,s,e,a,l)=>{const n=D(t),i=ie(t);if(s===0||i)return i?T(t,_)?1e6:T(t,A)?-1e6:0:le(t,_);if(l){let o=-1/0;for(let c of n){const m=F(t,c),d=t.map(k=>[...k]);d[m][c]=_;const N=P(d,s-1,e,a,!1);if(o=Math.max(o,N),e=Math.max(e,o),e>=a)break}return o}else{let o=1/0;for(let c of n){const m=F(t,c),d=t.map(k=>[...k]);d[m][c]=A;const N=P(d,s-1,e,a,!0);if(o=Math.min(o,N),a=Math.min(a,o),e>=a)break}return o}},D=t=>{const s=[];for(let e=0;e<y;e++)t[v-1][e]===E&&s.push(e);return s},F=(t,s)=>{for(let e=0;e<v;e++)if(t[e][s]===E)return e;return-1},ie=t=>T(t,A)||T(t,_)||D(t).length===0,le=(t,s)=>{let e=0;const l=t.map(n=>n[3]).filter(n=>n===s).length;e+=l*3;for(let n=0;n<v;n++){const i=t[n];for(let o=0;o<y-3;o++){const c=i.slice(o,o+4);e+=R(c,s)}}for(let n=0;n<y;n++){const i=t.map(o=>o[n]);for(let o=0;o<v-3;o++){const c=i.slice(o,o+4);e+=R(c,s)}}for(let n=0;n<v-3;n++)for(let i=0;i<y-3;i++){const o=[t[n][i],t[n+1][i+1],t[n+2][i+2],t[n+3][i+3]];e+=R(o,s)}for(let n=0;n<v-3;n++)for(let i=0;i<y-3;i++){const o=[t[n+3][i],t[n+2][i+1],t[n+1][i+2],t[n][i+3]];e+=R(o,s)}return e},R=(t,s)=>{let e=0;const a=A,l=t.filter(o=>o===s).length,n=t.filter(o=>o===E).length,i=t.filter(o=>o===a).length;return l===4?e+=100:l===3&&n===1?e+=5:l===2&&n===2&&(e+=2),i===3&&n===1&&(e-=4),e},T=(t,s)=>{for(let e=0;e<y-3;e++)for(let a=0;a<v;a++)if(t[a][e]===s&&t[a][e+1]===s&&t[a][e+2]===s&&t[a][e+3]===s)return!0;for(let e=0;e<y;e++)for(let a=0;a<v-3;a++)if(t[a][e]===s&&t[a+1][e]===s&&t[a+2][e]===s&&t[a+3][e]===s)return!0;for(let e=0;e<y-3;e++)for(let a=0;a<v-3;a++)if(t[a][e]===s&&t[a+1][e+1]===s&&t[a+2][e+2]===s&&t[a+3][e+3]===s)return!0;for(let e=0;e<y-3;e++)for(let a=3;a<v;a++)if(t[a][e]===s&&t[a-1][e+1]===s&&t[a-2][e+2]===s&&t[a-3][e+3]===s)return!0;return!1},W=(t,s)=>{for(let e=0;e<y-3;e++)for(let a=0;a<v;a++)if(t[a][e]===s&&t[a][e+1]===s&&t[a][e+2]===s&&t[a][e+3]===s)return[[a,e],[a,e+1],[a,e+2],[a,e+3]];for(let e=0;e<y;e++)for(let a=0;a<v-3;a++)if(t[a][e]===s&&t[a+1][e]===s&&t[a+2][e]===s&&t[a+3][e]===s)return[[a,e],[a+1,e],[a+2,e],[a+3,e]];for(let e=0;e<y-3;e++)for(let a=0;a<v-3;a++)if(t[a][e]===s&&t[a+1][e+1]===s&&t[a+2][e+2]===s&&t[a+3][e+3]===s)return[[a,e],[a+1,e+1],[a+2,e+2],[a+3,e+3]];for(let e=0;e<y-3;e++)for(let a=3;a<v;a++)if(t[a][e]===s&&t[a-1][e+1]===s&&t[a-2][e+2]===s&&t[a-3][e+3]===s)return[[a,e],[a-1,e+1],[a-2,e+2],[a-3,e+3]];return null},O=6,$=7,L=ae((t,s)=>({board:Array.from({length:O},()=>Array($).fill(0)),currentPlayer:1,winner:null,gameStatus:"menu",difficulty:"medium",inputMode:"mouse",hoverColumn:3,winningLine:null,isAiming:!1,setHoverColumn:e=>t({hoverColumn:e}),setDifficulty:e=>t({difficulty:e}),setInputMode:e=>t({inputMode:e}),setIsAiming:e=>t({isAiming:e}),startGame:()=>t({board:Array.from({length:O},()=>Array($).fill(0)),currentPlayer:1,winner:null,gameStatus:"playing",winningLine:null,isAiming:!1}),toMenu:()=>t({gameStatus:"menu"}),playMove:e=>{const{board:a,currentPlayer:l,winner:n,gameStatus:i,difficulty:o}=s();if(n||i!=="playing"||l!==1)return;let c=-1;for(let d=0;d<O;d++)if(a[d][e]===0){c=d;break}if(c===-1)return;const m=a.map(d=>[...d]);if(m[c][e]=1,T(m,1)){const d=W(m,1);t({board:m,winner:1,winningLine:d}),setTimeout(()=>{t({gameStatus:"gameover"})},1500);return}t({board:m,currentPlayer:2}),setTimeout(()=>{const{board:d,winner:N}=s();if(N)return;const k=oe(d,o);let M=-1;for(let p=0;p<O;p++)if(d[p][k]===0){M=p;break}if(M!==-1){const p=d.map(S=>[...S]);if(p[M][k]=2,T(p,2)){const S=W(p,2);t({board:p,winner:2,currentPlayer:1,winningLine:S}),setTimeout(()=>{t({gameStatus:"gameover"})},1500)}else p.every(S=>S.every(w=>w!==0))?(t({board:p,currentPlayer:1,winner:"draw"}),setTimeout(()=>{t({gameStatus:"gameover"})},1500)):t({board:p,currentPlayer:1})}},1200)}})),ce={section1Title:"1. The Recursive Algorithm",section1Text:"This game uses the Minimax algorithm with a depth-limited search. It treats Connect 4 as a Zero-Sum Game (Your gain is my loss). The AI builds a 'Game Tree' by recursively simulating moves. At 'Hard' difficulty, it calculates 6 moves ahead (Depth 6), exploring thousands of possible future board states before you even blink.",section2Title:"2. Heuristic Evaluation Function",section2Text:"Since we cannot calculate until the end of the game (too many possibilities), we stop at a certain depth and score the board state using a Heuristic Function:",section2List:["Center Column Control: +3 points (Strategic value).","3-in-a-row (Open): +5 points (Attack).","2-in-a-row (Open): +2 points (Build up).","Opponent has 3-in-a-row: -4 points (Defensive penalty)."],section3Title:"3. Optimization: Alpha-Beta Pruning",section3Text:"To make the AI faster, we implement Alpha-Beta Pruning. This optimization 'prunes' (cuts off) branches of the decision tree that are mathematically irrelevant. If the AI finds a move that is 'good enough', it stops checking worse options immediately. This allows us to search twice as deep in the same amount of time."},de={section1Title:"Û±. Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ø§Ø²Ú¯Ø´ØªÛŒ (Recursive)",section1Text:"Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ Ø§Ø² Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù…ÛŒÙ†ÛŒâ€ŒÙ…Ú©Ø³ (Minimax) Ø¨Ø§ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­Ø¯ÙˆØ¯ Ø¯Ø± Ø¹Ù…Ù‚ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Connect 4 Ø±Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÛŒÚ© Â«Ø¨Ø§Ø²ÛŒ Ù…Ø¬Ù…ÙˆØ¹-ØµÙØ±Â» (Zero-Sum Game) Ø¯Ø± Ù†Ø¸Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯. Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¨Ø§ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§Ø²Ú¯Ø´ØªÛŒ Ø­Ø±Ú©Ø§ØªØŒ ÛŒÚ© Â«Ø¯Ø±Ø®Øª Ø¨Ø§Ø²ÛŒÂ» Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯. Ø¯Ø± Ø³Ø·Ø­ Ø¯Ø´ÙˆØ§Ø±ØŒ ØªØ§ Û¶ Ø­Ø±Ú©Øª Ø¬Ù„ÙˆØªØ± Ø±Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ (Ø¹Ù…Ù‚ Û¶) Ùˆ Ù‡Ø²Ø§Ø±Ø§Ù† Ø­Ø§Ù„Øª Ù…Ù…Ú©Ù† Ø¢ÛŒÙ†Ø¯Ù‡ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.",section2Title:"Û². ØªØ§Ø¨Ø¹ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ù‡ÛŒÙˆØ±ÛŒØ³ØªÛŒÚ© (Heuristic)",section2Text:"Ú†ÙˆÙ† Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… ØªØ§ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ø­Ø§Ù„Ø§Øª Ø±Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ù†ÛŒÙ… (ØªØ¹Ø¯Ø§Ø¯ Ø­Ø§Ù„Ø§Øª Ø¨Ø³ÛŒØ§Ø± Ø²ÛŒØ§Ø¯ Ø§Ø³Øª)ØŒ Ø¯Ø± Ø¹Ù…Ù‚ Ù…Ø´Ø®ØµÛŒ ØªÙˆÙ‚Ù Ú©Ø±Ø¯Ù‡ Ùˆ ØµÙØ­Ù‡ Ø±Ø§ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÛŒÚ© ØªØ§Ø¨Ø¹ Ù‡ÛŒÙˆØ±ÛŒØ³ØªÛŒÚ© Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:",section2List:["Ú©Ù†ØªØ±Ù„ Ø³ØªÙˆÙ† Ù…Ø±Ú©Ø²ÛŒ: +Û³ Ø§Ù…ØªÛŒØ§Ø² (Ø§Ø±Ø²Ø´ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ©).","Û³ Ù…Ù‡Ø±Ù‡ Ù¾Ø´Øª Ø³Ø± Ù‡Ù… (Ø¨Ø§Ø²): +Ûµ Ø§Ù…ØªÛŒØ§Ø² (Ø­Ù…Ù„Ù‡).","Û² Ù…Ù‡Ø±Ù‡ Ù¾Ø´Øª Ø³Ø± Ù‡Ù… (Ø¨Ø§Ø²): +Û² Ø§Ù…ØªÛŒØ§Ø² (Ø²Ù…ÛŒÙ†Ù‡ Ø³Ø§Ø²ÛŒ).","Ø­Ø±ÛŒÙ Û³ Ù…Ù‡Ø±Ù‡ Ø¯Ø§Ø±Ø¯: -Û´ Ø§Ù…ØªÛŒØ§Ø² (Ø¬Ø±ÛŒÙ…Ù‡ Ø¯ÙØ§Ø¹ÛŒ)."],section3Title:"Û³. Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ: Ù‡Ø±Ø³ Ø¢Ù„ÙØ§-Ø¨ØªØ§ (Alpha-Beta Pruning)",section3Text:"Ø¨Ø±Ø§ÛŒ Ø§ÙØ²Ø§ÛŒØ´ Ø³Ø±Ø¹Øª Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒØŒ Ø§Ø² Â«Ù‡Ø±Ø³ Ø¢Ù„ÙØ§-Ø¨ØªØ§Â» Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…. Ø§ÛŒÙ† Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§ÛŒÛŒ Ø§Ø² Ø¯Ø±Ø®Øª ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ø±Ø§ Ú©Ù‡ Ø§Ø² Ù†Ø¸Ø± Ø±ÛŒØ§Ø¶ÛŒ Ø¨ÛŒâ€ŒØ§Ù‡Ù…ÛŒØª Ù‡Ø³ØªÙ†Ø¯ØŒ Â«Ù‡Ø±Ø³Â» (Ù‚Ø·Ø¹) Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§Ú¯Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø­Ø±Ú©ØªÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯ Ú©Ù‡ Â«Ø¨Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ú©Ø§ÙÛŒ Ø®ÙˆØ¨Â» Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø¯ØªØ± Ø±Ø§ Ù…ØªÙˆÙ‚Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§ÛŒÙ† Ø¨Ù‡ Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ø¯Ø± Ù‡Ù…Ø§Ù† Ù…Ø¯Øª Ø²Ù…Ø§Ù†ØŒ ØªØ§ Ø¯Ùˆ Ø¨Ø±Ø§Ø¨Ø± Ø¹Ù…ÛŒÙ‚â€ŒØªØ± Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†ÛŒÙ…."},I={en:ce,fa:de},fe=()=>{const{startGame:t,difficulty:s,setDifficulty:e,inputMode:a,setInputMode:l,gameStatus:n}=L(),[i,o]=x.useState(!1),[c,m]=x.useState("en");return n!=="menu"?null:r.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-[#050a15]/90 backdrop-blur-sm text-white font-serif",children:[r.jsxs("div",{className:"text-center mb-8 relative group",children:[r.jsx("h1",{className:"text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-b from-[#ffd700] via-[#ffaa00] to-[#b8860b] drop-shadow-[0_0_15px_rgba(255,215,0,0.6)] animate-pulse cursor-default",children:"MYSTIC CONNECT"}),r.jsx("p",{className:"text-[#aaccff] mt-2 tracking-[0.3em] uppercase text-sm opacity-80 border-t border-b border-[#aaccff]/30 py-1 inline-block",children:"The Ancient Ritual"})]}),r.jsxs("div",{className:"glass-panel p-10 w-[450px] space-y-8 relative border border-[#ffd700]/30 shadow-[0_0_40px_rgba(0,0,0,0.5)]",children:[r.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-[#ffd700] rounded-tl-lg"}),r.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-[#ffd700] rounded-tr-lg"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-[#ffd700] rounded-bl-lg"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-[#ffd700] rounded-br-lg"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-xs font-bold text-[#ffd700] uppercase tracking-widest text-center block",children:"Choose Your Vessel"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>l("mouse"),className:`flex-1 py-4 px-2 rounded-lg transition-all border border-[#4a5a7a] flex flex-col items-center gap-2 group
                ${a==="mouse"?"bg-[#1a3a6a] border-[#ffd700] shadow-[0_0_15px_rgba(255,215,0,0.2)]":"bg-[#0d1d3d] opacity-60 hover:opacity-100 hover:border-[#aaccff]"}`,children:[r.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:"ðŸ–±ï¸"}),r.jsx("span",{className:"text-[10px] uppercase font-bold text-[#aaccff]",children:"Tactician"})]}),r.jsxs("button",{onClick:()=>l("hand"),className:`flex-1 py-4 px-2 rounded-lg transition-all border border-[#4a5a7a] flex flex-col items-center gap-2 group
                ${a==="hand"?"bg-[#3a1a6a] border-[#ff00ff] shadow-[0_0_15px_rgba(255,0,255,0.3)]":"bg-[#1d0d3d] opacity-60 hover:opacity-100 hover:border-[#ebaaff]"}`,children:[r.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:"ðŸ”¥"}),r.jsx("span",{className:"text-[10px] uppercase font-bold text-[#ebaaff]",children:"Fire Caster"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-xs font-bold text-[#ffd700] uppercase tracking-widest text-center block",children:"Spirit Strength"}),r.jsx("div",{className:"flex justify-between gap-2 p-1 rounded bg-[#050a15]/50 border border-[#2a3a5a]",children:["easy","medium","hard"].map(d=>r.jsxs("button",{onClick:()=>e(d),className:`flex-1 py-2 text-xs font-bold rounded transition-all capitalize ${s===d?"bg-[#2a4a7a] text-[#ffd700] shadow-md border border-[#4a6a9a]":"text-[#5a6a8a] hover:text-[#aaccff]"}`,children:[d==="easy"&&"Novice",d==="medium"&&"Adept",d==="hard"&&"Master"]},d))}),r.jsxs("div",{className:"text-[10px] text-[#5a6a8a] text-center italic font-sans min-h-[1.5em]",children:[s==="easy"&&"The spirit is playful and makes mistakes.",s==="medium"&&"A worthy opponent for a trained mage.",s==="hard"&&"The Ancient One sees all futures."]})]}),r.jsx("button",{onClick:t,className:"magic-btn w-full py-4 text-xl font-bold tracking-widest rounded shadow-lg border-2 border-[#ffd700]",children:"Begin Ritual"}),r.jsxs("button",{onClick:()=>o(!0),className:"w-full py-2 bg-transparent border border-[#aaccff]/30 text-[#aaccff]/60 hover:text-[#ffd700] hover:border-[#ffd700] rounded transition flex items-center justify-center gap-2 uppercase tracking-widest text-[10px] group",children:[r.jsx("span",{children:"ðŸ“œ The Scroll of Logic"}),r.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:"âœ¨"})]})]}),r.jsx("div",{className:"absolute bottom-6 flex flex-col items-center gap-2 z-50",children:r.jsxs("a",{href:"https://github.com/Amkhodaei83",target:"_blank",rel:"noopener noreferrer",className:"text-[#aaccff] opacity-60 hover:opacity-100 hover:text-[#ffd700] transition-all text-xs tracking-widest uppercase flex items-center gap-2 group",children:[r.jsx("span",{children:"Forged by Amkhodaei83"}),r.jsx("span",{className:"text-lg group-hover:-translate-y-1 transition-transform",children:"ðŸ”—"})]})}),i&&r.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-black/95 backdrop-blur-xl p-4 animate-bounce-in",children:r.jsxs("div",{className:"bg-[#0d1d3d] border border-[#ffd700] w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-lg shadow-[0_0_50px_rgba(255,215,0,0.1)] relative flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-[#aaccff]/20 bg-[#050a15]",children:[r.jsx("h2",{className:"text-xl font-bold text-[#ffd700] tracking-widest uppercase",children:c==="en"?"Under the Hood: Minimax":"Ø²ÛŒØ± Ú©Ø§Ù¾ÙˆØª: Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù…ÛŒÙ†ÛŒâ€ŒÙ…Ú©Ø³"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>m("en"),className:`px-3 py-1 rounded text-xs font-bold transition-colors ${c==="en"?"bg-[#ffd700] text-black":"bg-[#1a3a6a] text-gray-400"}`,children:"EN"}),r.jsx("button",{onClick:()=>m("fa"),className:`px-3 py-1 rounded text-xs font-bold transition-colors ${c==="fa"?"bg-[#ffd700] text-black":"bg-[#1a3a6a] text-gray-400"}`,children:"FA"})]})]}),r.jsxs("div",{className:"p-8 text-[#e0e0e0] space-y-8 leading-relaxed text-sm md:text-base font-sans",dir:c==="fa"?"rtl":"ltr",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-[#00ffff] font-bold text-lg mb-2 border-b border-[#00ffff]/30 pb-1 inline-block",children:I[c].section1Title}),r.jsx("p",{className:"opacity-90",children:I[c].section1Text})]}),r.jsxs("div",{className:"bg-[#050a15]/50 p-6 rounded border border-[#aaccff]/10",children:[r.jsx("h3",{className:"text-[#ffd700] font-bold text-lg mb-2 border-b border-[#ffd700]/30 pb-1 inline-block",children:I[c].section2Title}),r.jsx("ul",{className:"list-disc list-inside space-y-2 opacity-90 mt-2",children:I[c].section2List.map((d,N)=>r.jsx("li",{children:d},N))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-[#ff00ff] font-bold text-lg mb-2 border-b border-[#ff00ff]/30 pb-1 inline-block",children:I[c].section3Title}),r.jsx("p",{className:"opacity-90",children:I[c].section3Text})]})]}),r.jsx("div",{className:"p-4 border-t border-[#aaccff]/20 bg-[#050a15] text-center sticky bottom-0",children:r.jsx("button",{onClick:()=>o(!1),className:"px-8 py-2 bg-[#aaccff]/10 hover:bg-[#aaccff]/20 text-[#aaccff] border border-[#aaccff]/50 rounded transition uppercase tracking-widest text-xs",children:c==="en"?"Close Terminal":"Ø¨Ø³ØªÙ† ØªØ±Ù…ÛŒÙ†Ø§Ù„"})})]})}),r.jsx("div",{className:"mt-8 text-[#aaccff] text-xs max-w-md text-center bg-[#050a15]/60 p-4 rounded border border-[#aaccff]/20",children:a==="hand"?r.jsxs(r.Fragment,{children:["Hold ",r.jsx("span",{className:"font-bold text-white",children:"Fist âœŠ"})," to charge energy. ",r.jsx("span",{className:"font-bold text-white",children:"Open Hand ðŸ–"})," to release spell."]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"font-bold text-white",children:"Move cursor"})," to aim. ",r.jsx("span",{className:"font-bold text-white",children:"Click"})," to summon orb."]})})]})},ue=()=>{const{gameStatus:t,currentPlayer:s,winner:e,startGame:a,toMenu:l}=L();if(t==="menu")return null;let n=s;return e===1&&(n=1),e===2&&(n=2),r.jsxs("div",{className:"absolute inset-0 pointer-events-none z-20 flex flex-col justify-between p-8 font-serif",children:[r.jsxs("div",{className:"flex justify-between items-start w-full pointer-events-auto",children:[r.jsx("button",{onClick:l,className:"bg-[#050a15]/80 backdrop-blur border border-[#4a5a7a] text-[#aaccff] px-4 py-2 rounded hover:bg-[#1a2a4a] hover:border-[#ffd700] transition-all text-sm uppercase tracking-widest shadow-lg",children:"â† Retreat"}),r.jsx("div",{className:`
           relative px-8 py-3 rounded-full border-2 shadow-[0_0_20px_rgba(0,0,0,0.5)] backdrop-blur-md transform transition-all duration-500
           ${n===1?"bg-gradient-to-r from-[#5a3a1a] to-[#8a5a2a] border-[#ffd700] shadow-[0_0_20px_rgba(255,170,0,0.4)]":"bg-gradient-to-r from-[#1a2a4a] to-[#2a4a7a] border-[#aaccff] shadow-[0_0_20px_rgba(0,170,255,0.4)]"}
        `,children:r.jsx("h2",{className:"text-xl font-bold flex items-center gap-4 text-white drop-shadow-md",children:n===1?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-2xl animate-pulse",children:"â˜€ï¸"}),r.jsx("span",{className:"tracking-widest text-[#ffd700]",children:"YOUR TURN"})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"tracking-widest text-[#aaccff]",children:"SPIRIT TURN"}),r.jsx("span",{className:"text-2xl animate-pulse",children:"ðŸŒ™"})]})})})]}),t==="gameover"&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#050a15]/80 pointer-events-auto backdrop-blur-sm z-50 animate-bounce-in",children:r.jsxs("div",{className:"bg-[#0a1a2a] border-4 border-[#ffd700] p-12 rounded-lg shadow-[0_0_50px_rgba(255,215,0,0.3)] text-center max-w-lg w-full relative overflow-hidden",children:[r.jsx("div",{className:`absolute inset-0 opacity-20 ${e===1?"bg-[#ffd700]":"bg-[#0000ff]"}`}),r.jsxs("h2",{className:"text-6xl font-black mb-4 uppercase tracking-widest relative z-10 drop-shadow-[0_4px_4px_rgba(0,0,0,1)]",children:[e===1&&r.jsx("span",{className:"text-[#ffd700] text-glow",children:"Victory!"}),e===2&&r.jsx("span",{className:"text-[#5555ff] text-glow",children:"Defeated"}),e==="draw"&&r.jsx("span",{className:"text-[#aaaaaa]",children:"Stalemate"})]}),r.jsx("p",{className:"text-[#aaccff] mb-10 text-lg relative z-10 italic border-t border-b border-[#aaccff]/20 py-4",children:e===1?"The Rune Gate has opened.":"The Spirit has blocked your path."}),r.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[r.jsx("button",{onClick:a,className:"magic-btn w-full py-4 text-xl font-bold rounded shadow-lg",children:"Replay Ritual ðŸ”„"}),r.jsx("button",{onClick:l,className:"w-full py-3 bg-transparent border border-[#4a5a7a] text-[#5a6a8a] hover:text-white hover:border-white rounded transition uppercase tracking-widest text-sm",children:"Return to Void"})]})]})})]})};var U=se(),V=ne();const me=()=>{const t=x.useRef(null),s=x.useRef(null),e=x.useRef(!1),a=x.useRef(!1),{inputMode:l,setHoverColumn:n,playMove:i,setIsAiming:o}=L(),[c,m]=x.useState([]),[d,N]=x.useState(""),[k,M]=x.useState(null),[p,S]=x.useState(!1),[w,H]=x.useState("loading"),j=x.useRef({wasFist:!1,fistHoldFrames:0,openHoldFrames:0,lastCol:3});x.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),x.useEffect(()=>{(async()=>{try{const h=(await navigator.mediaDevices.enumerateDevices()).filter(f=>f.kind==="videoinput");a.current&&(m(h),h.length>0&&N(h[0].deviceId))}catch(g){console.error("Error listing devices:",g)}})()},[]),x.useEffect(()=>{if(l!=="hand"||!d)return;let u=null;return S(!1),M(null),(async()=>{try{t.current&&t.current.srcObject&&t.current.srcObject.getTracks().forEach(C=>C.stop());const h={video:{deviceId:{exact:d},width:{ideal:640},height:{ideal:480},frameRate:{ideal:30}}},f=await navigator.mediaDevices.getUserMedia(h);if(!a.current){f.getTracks().forEach(b=>b.stop());return}u=f,t.current&&(t.current.srcObject=f,t.current.onloadeddata=()=>{a.current&&t.current&&(t.current.play().catch(b=>console.log("Play interrupted")),S(!0))})}catch{a.current&&M("Camera blocked or missing.")}})(),()=>{u&&u.getTracks().forEach(h=>h.stop())}},[l,d]),x.useEffect(()=>{if(l!=="hand"||!p)return;const u=new U.Hands({locateFile:f=>`/mediapipe/${f}`});u.setOptions({maxNumHands:1,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),u.onResults(q);let g;const h=async()=>{if(!a.current)return;const f=t.current;if(f&&f.readyState>=2&&!f.paused&&!f.ended&&f.videoWidth>0&&!e.current)try{e.current=!0,await u.send({image:f})}catch(b){b&&b.message&&!b.message.includes("not readable")&&console.warn("Vision Frame Dropped:",b)}finally{e.current=!1}a.current&&(g=requestAnimationFrame(h))};return h(),()=>{cancelAnimationFrame(g),u.close(),e.current=!1}},[l,p]);const Y=u=>{const g=u[0],h=[8,12,16,20];let f=0;return h.forEach(b=>{const C=u[b];Math.hypot(C.x-g.x,C.y-g.y)>.25&&f++}),f>=3?"open":"fist"},q=u=>{if(!a.current||!s.current||!u.image||!t.current)return;const g=t.current.videoWidth,h=t.current.videoHeight;if(g===0||h===0)return;s.current.width=g,s.current.height=h;const f=s.current.getContext("2d");if(f.save(),f.clearRect(0,0,g,h),f.translate(g,0),f.scale(-1,1),f.drawImage(u.image,0,0,g,h),u.multiHandLandmarks&&u.multiHandLandmarks.length>0){const b=u.multiHandLandmarks[0],C=Y(b);if(L.getState().gameStatus==="playing")if(C==="fist"){if(j.current.fistHoldFrames++,j.current.openHoldFrames=0,j.current.fistHoldFrames>3){j.current.wasFist=!0,H("aiming"),o(!0);const Z=b[0],K=b[5],J=1-(Z.x+K.x)/2,Q=Math.floor((Math.max(.2,Math.min(J,.8))-.2)/.6*7),G=Math.max(0,Math.min(6,Q));j.current.lastCol=G,n(G)}}else C==="open"&&(j.current.fistHoldFrames=0,j.current.openHoldFrames++,o(!1),j.current.wasFist?j.current.openHoldFrames>5&&(H("dropping"),i(j.current.lastCol),j.current.wasFist=!1):H("reloading"));const B=w==="aiming"?"#FFD700":w==="dropping"?"#00FFFF":"#aaaaaa";f.shadowColor=B,f.shadowBlur=15,V.drawConnectors(f,b,U.HAND_CONNECTIONS,{color:B,lineWidth:5}),V.drawLandmarks(f,b,{color:"#ffffff",lineWidth:2,radius:4}),f.shadowBlur=0}else o(!1),j.current.fistHoldFrames=0;f.restore()};return l!=="hand"?null:r.jsxs("div",{className:"absolute bottom-6 right-6 z-50 flex flex-col items-end gap-2 font-serif",children:[r.jsx("label",{htmlFor:"camera-select",className:"sr-only",children:"Choose Camera"}),r.jsx("select",{id:"camera-select",className:"bg-[#050a15]/90 text-[#aaccff] text-[10px] p-1 rounded border border-[#4a5a7a] outline-none max-w-[150px] uppercase tracking-wider cursor-pointer",onChange:u=>N(u.target.value),value:d,children:c.map((u,g)=>r.jsx("option",{value:u.deviceId,children:u.label||`Scrying Glass ${g+1}`},u.deviceId))}),r.jsx("div",{className:`
          relative w-52 h-40 overflow-hidden rounded-lg transition-all duration-300
          border-4 shadow-[0_0_20px_rgba(0,0,0,0.5)] bg-black
          ${w==="aiming"?"border-[#ffd700] shadow-[0_0_30px_rgba(255,215,0,0.6)]":w==="dropping"?"border-[#00ffff] shadow-[0_0_35px_rgba(0,255,255,0.8)] scale-105":"border-[#4a5a7a] opacity-90"}
      `,children:k?r.jsx("div",{className:"flex items-center justify-center h-full p-4 text-red-500 text-xs text-center",children:k}):r.jsxs(r.Fragment,{children:[r.jsx("video",{ref:t,className:"hidden",playsInline:!0,muted:!0,autoPlay:!0}),r.jsx("canvas",{ref:s,className:"w-full h-full object-cover"}),!p&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[#aaccff] text-xs animate-pulse tracking-widest bg-black/80 z-10",children:"WARMING UP VISION..."}),p&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsxs("span",{className:`
                        px-3 py-1 text-[10px] font-bold tracking-[0.2em] uppercase backdrop-blur-md border shadow-lg transition-all duration-200
                        ${w==="aiming"?"bg-[#ffd700]/20 border-[#ffd700] text-[#ffd700]":w==="dropping"?"bg-[#00ffff]/20 border-[#00ffff] text-[#00ffff] scale-125":"bg-black/40 border-white/20 text-gray-400"}
                    `,children:[w==="aiming"&&"âš¡ CHARGING",w==="dropping"&&"âœ¨ CAST!",w==="reloading"&&"âœŠ FIST TO AIM",w==="loading"&&"..."]})})]})})]})},xe=()=>{const{progress:t,active:s}=ee();return!s&&t===100?null:r.jsx("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-[#0a1a2a] transition-opacity duration-1000",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-[#ffd700] font-serif text-2xl tracking-[0.3em] animate-pulse mb-6 drop-shadow-[0_0_10px_rgba(255,215,0,0.5)]",children:"SUMMONING WORLD"}),r.jsx("div",{className:"w-64 h-2 bg-[#1a2a4a] rounded-full mx-auto overflow-hidden border border-[#4a5a7a] relative",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-[#b8860b] to-[#ffd700] shadow-[0_0_20px_#ffd700]",style:{width:`${t}%`,transition:"width 0.2s ease-out"}})}),r.jsxs("div",{className:"mt-3 text-[#aaccff] text-xs font-mono opacity-70",children:[t.toFixed(0),"% COMPLETE"]})]})})},he=x.lazy(()=>te(()=>import("./Scene-DNPc-Deh.js"),__vite__mapDeps([0,1,2,3])));function pe(){return r.jsxs("div",{className:"relative w-full h-screen bg-[#0a1a2a] overflow-hidden font-serif",children:[r.jsx(xe,{}),r.jsx("div",{className:"absolute inset-0 z-0",children:r.jsx(x.Suspense,{fallback:null,children:r.jsx(he,{})})}),r.jsx(fe,{}),r.jsx(ue,{}),r.jsx(me,{})]})}re.createRoot(document.getElementById("root")).render(r.jsx(x.StrictMode,{children:r.jsx(pe,{})}));export{L as u};
